/*! JRoll-Infinite v2.1.4 ~ (c) 2016 Author:BarZu Git:https://github.com/chjtx/JRoll/tree/master/extends/jroll-infinite */
!function(e,i,n){"use strict";function t(e,i){var n=e,t="'use strict';\nvar __t='';__t+='",l=0,o=/\{\{=([^{]+)\}\}|\{\{(each [\w$._]+ as [\w$_]+ [\w$_]+)\}\}|\{\{if ([^{]+)\}\}|\{\{(else)\}\}|\{\{else if ([^{]+)\}\}|(\{\{\/each\}\}|\{\{\/if\}\})|\{\{([^{]+)\}\}/g;return n=n.replace(/(\n|\r)|(\{\{\s+)|(\s+\}\})|(\s{2,})|(')/g,function(e,i,n,t,l,o){var r;return i?r="":n?r="{{":t?r="}}":l?r=" ":o&&(r="\\'"),r}),n.replace(o,function(e,i,o,r,a,s,c,f,p){if(t+=n.slice(l,p),l=p+e.length,i)t+="'+("+i.replace(/\\'/g,"'")+")+'";else if(o){var d=o.split(" ");t+="';\nfor(var "+d[4]+"=0,"+d[3]+";"+d[4]+"<"+d[1]+".length;"+d[4]+"++){\n"+d[3]+"="+d[1]+"["+d[4]+"];\n__t+='"}else r?t+="';\nif("+r.replace(/\\'/g,"'")+"){\n__t+='":a?t+="';\n}else{\n__t+='":s?t+="';\n}else if("+s.replace(/\\'/g,"'")+"){\n__t+='":c?t+="';\n};\n__t+='":f&&(t+="';\n"+f.replace(/\\'/g,"'")+";\n__t+='");return e}),t+=n.slice(l)+"';return __t;",new Function(i,t)}function l(e,i){return e(i)}n.prototype.infinite=function(e){function n(e){var i;if(r=!1,e){i="<section class='jroll-infinite-page'>";for(var n=0,t=e.length;n<t;n++)i+=f.render(a,e[n],n);i+="</section>",i+=s.options.total===s.options.page?f.completeTip:f.loadingTip,s.scroller.lastElementChild&&s.scroller.removeChild(s.scroller.lastElementChild),s.scroller.insertAdjacentHTML("beforeend",i),s.refresh(),(f.hideImg||f.blank)&&setTimeout(function(){var e=s.scroller.querySelectorAll(".jroll-infinite-page"),i=e[e.length-1];i&&(i.style.height=i.offsetHeight+"px"),o(e)},10)}}function o(e){if(f.hideImg||f.blank)for(var i=e||s.scroller.querySelectorAll(".jroll-infinite-page"),n=s.wrapper.clientHeight,t=s.y,l=f.blank?"jroll-infinite-hide":"jroll-infinite-hideimg",o=0,r=i.length;o<r;o++)i[o].offsetTop-n+t>0||i[o].offsetTop+i[o].offsetHeight+t<0?i[o].classList.add(l):i[o].classList.remove(l)}var r,a,s=this,c=Object.keys(e||{}),f={total:99,getData:null,hideImg:!1,blank:!1,template:"",loadingTip:'<div class="jroll-infinite-tip">正在加载...</div>',completeTip:'<div class="jroll-infinite-tip">已加载全部内容</div>',root:"_obj",compile:t,render:l};for(var p in c)f[c[p]]=e[c[p]];s.options.total=f.total,s.options.page=1,s.infinite_callback=n,a=f.compile(f.template,f.root);var d=i.getElementById("jroll_style"),g="\n/* jroll-infinite */\n.jroll-infinite-hide>*{display:none}.jroll-infinite-hideimg img{display:none}\n";d?/jroll-infinite/.test(d.innerHTML)||(d.innerHTML+=g):(d=i.createElement("style"),d.id="jroll_style",d.innerHTML=g,i.head.appendChild(d)),i.createElement("div").innerHTML=f.loadingTip+f.completeTip,"function"==typeof f.getData&&(s.scroller.innerHTML=f.loadingTip,f.getData(s.options.page,n)),s.on("scrollEnd",function(){s.y<s.maxScrollY+s.scroller.querySelector(".jroll-infinite-tip").offsetHeight&&s.options.page!==s.options.total&&!r&&(r=!0,f.getData(++s.options.page,n)),o()})},n.prototype.infinite.version="2.1.4","undefined"!=typeof module&&module.exports&&(module.exports=n),"function"==typeof define&&define(function(){return n})}(window,document,JRoll);